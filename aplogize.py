from ai import get_ai_apology


async def apologize(update, context):
    chat_id = update.message.chat_id
    print(f"Starting apology generation for chat {chat_id}")

    waiting_message = await update.message.reply_text("åº¦ç·Šå‘¢å–®é‡é»æ‹†â€¦ â³")
    apology = get_ai_apology()
    print(f"Generated apology for chat {chat_id}: {apology}")

    if apology and apology != 'å“å‘€ï¼Œé“æ­‰å¤±æ•—ï¼Œå””å¥½æ‰“æˆ‘ğŸ™':
        await waiting_message.edit_text(apology)
    else:
        await waiting_message.edit_text('å“å‘€ï¼Œé“æ­‰å¤±æ•—ï¼Œå””å¥½æ‰“æˆ‘ğŸ™')
